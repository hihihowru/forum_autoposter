# ä¸»æµç¨‹æ¶æ§‹èˆ‡å…§å®¹ç”Ÿæˆç³»çµ±åˆ†æ

## ğŸ—ï¸ ç•¶å‰ç³»çµ±æ¶æ§‹

### è§¸ç™¼å™¨ç³»çµ± (MainWorkflowEngine)

```mermaid
graph TD
    A[MainWorkflowEngine] --> B[WorkflowType]
    B --> C[AFTER_HOURS_LIMIT_UP]
    B --> D[INTRADAY_SURGE_STOCKS]
    B --> E[TRENDING_TOPICS]
    B --> F[LIMIT_UP_STOCKS]
    B --> G[HOT_STOCKS]
    B --> H[INDUSTRY_ANALYSIS]
    B --> I[MONTHLY_REVENUE]
    B --> J[HIGH_VOLUME]
    B --> K[NEWS_SUMMARY]
```

### æ•¸æ“šæºæ•´åˆ

| æ•¸æ“šæº | ç”¨é€” | ç‹€æ…‹ |
|--------|------|------|
| **Finlab API** | è‚¡åƒ¹ã€æˆäº¤é‡ã€æˆäº¤é‡‘é¡ | âœ… å·²æ•´åˆ |
| **Serper API** | æ–°èæœå°‹ã€æ¼²åœåŸå› åˆ†æ | âœ… å·²æ•´åˆ |
| **CMoney API** | ç†±é–€è©±é¡Œã€æ–‡ç« ç™¼å¸ƒ | âœ… å·²æ•´åˆ |
| **Google Sheets** | KOLè¨­å®šã€è²¼æ–‡è¨˜éŒ„ | âœ… å·²æ•´åˆ |
| **OpenAI API** | å…§å®¹ç”Ÿæˆ | âœ… å·²æ•´åˆ |

### å…§å®¹ç”Ÿæˆæ¨¡çµ„æ¶æ§‹

```mermaid
graph LR
    A[è§¸ç™¼å™¨] --> B[æ•¸æ“šæ”¶é›†]
    B --> C[KOLé…å°]
    C --> D[å…§å®¹ç”Ÿæˆå±¤]
    
    subgraph "å…§å®¹ç”Ÿæˆå±¤ (å•é¡Œå€åŸŸ)"
        D --> E[EnhancedPromptTemplates]
        D --> F[ContentGenerator]
        D --> G[EnhancedPromptGenerator]
        D --> H[DataDrivenContentGenerator]
        D --> I[PersonalizedPromptGenerator]
    end
    
    E --> J[OpenAI API]
    F --> J
    G --> J
    H --> J
    I --> J
    
    J --> K[å…§å®¹å¾Œè™•ç†]
    K --> L[Google Sheetsè¨˜éŒ„]
```

## ğŸš¨ æ ¸å¿ƒå•é¡Œåˆ†æ

### 1. **Batch Create AIå‘³å•é¡Œ**

**å•é¡Œæ ¹æºï¼š**
- **å¤šç”Ÿæˆå™¨ä¸¦å­˜**ï¼š5å€‹ä¸åŒçš„å…§å®¹ç”Ÿæˆå™¨åŒæ™‚å­˜åœ¨ï¼Œç¼ºä¹çµ±ä¸€æ¨™æº–
- **å€‹äººåŒ–ä¸è¶³**ï¼šKOLç‰¹è‰²ä¸å¤ çªå‡ºï¼Œå…§å®¹åŒè³ªåŒ–åš´é‡
- **éš¨æ©ŸåŒ–æ©Ÿåˆ¶ä¸å®Œå–„**ï¼šç¼ºä¹çœŸæ­£çš„å…§å®¹å¤šæ¨£æ€§æ§åˆ¶
- **å“è³ªæ§åˆ¶ç¼ºå¤±**ï¼šæ–°è…³æœ¬å®¹æ˜“ç¹éç¾æœ‰çš„å„ªåŒ–æ©Ÿåˆ¶

**å…·é«”è¡¨ç¾ï¼š**
- å…§å®¹çµæ§‹éæ–¼ç›¸ä¼¼
- èªæ°£é¢¨æ ¼ç¼ºä¹å€‹äººç‰¹è‰²
- ç¼ºä¹çœŸæ­£çš„éš¨æ©Ÿæ€§å’Œå¤šæ¨£æ€§
- æ¨™é¡Œå’Œå…§å®¹æ¨¡æ¿åŒ–åš´é‡

### 2. **æ¶æ§‹è¤‡é›œæ€§å•é¡Œ**

- **é‡è¤‡åŠŸèƒ½**ï¼šå¤šå€‹ç”Ÿæˆå™¨æœ‰é‡ç–ŠåŠŸèƒ½
- **ç¶­è­·å›°é›£**ï¼šä¿®æ”¹éœ€è¦åŒæ™‚æ›´æ–°å¤šå€‹æ¨¡çµ„
- **å“è³ªä¸ä¸€è‡´**ï¼šä¸åŒç”Ÿæˆå™¨ç”¢å‡ºå“è³ªå·®ç•°å¤§
- **æ–°è…³æœ¬ç¹é**ï¼šå®¹æ˜“å‰µå»ºæ–°çš„ç”Ÿæˆé‚è¼¯ï¼Œå¿½ç•¥ç¾æœ‰å„ªåŒ–

## ğŸ¯ æ”¹é€²æ–¹æ¡ˆ

### 1. **çµ±ä¸€å…§å®¹ç”Ÿæˆæ¶æ§‹**

```mermaid
graph TD
    A[è§¸ç™¼å™¨] --> B[æ•¸æ“šæ”¶é›†èˆ‡åˆ†æ]
    B --> C[KOLæ™ºèƒ½é…å°]
    C --> D[çµ±ä¸€å…§å®¹ç”Ÿæˆå¼•æ“]
    
    subgraph "çµ±ä¸€å…§å®¹ç”Ÿæˆå¼•æ“"
        D --> E[KOLäººè¨­æ·±åº¦åˆ†æ]
        D --> F[æ•¸æ“šå¯è§£é‡‹æ€§è½‰æ›]
        D --> G[å¤šç¶­åº¦éš¨æ©ŸåŒ–å¼•æ“]
        D --> H[å“è³ªæ§åˆ¶æª¢æŸ¥å™¨]
    end
    
    E --> I[å€‹äººåŒ–Promptç”Ÿæˆ]
    F --> I
    G --> I
    I --> J[OpenAI APIèª¿ç”¨]
    J --> H
    H --> K[å…§å®¹å¾Œè™•ç†èˆ‡å„ªåŒ–]
    K --> L[ç™¼å¸ƒèˆ‡è¨˜éŒ„]
```

### 2. **æ ¸å¿ƒæ”¹é€²ç­–ç•¥**

#### A. **æ·±åº¦å€‹äººåŒ–ç³»çµ±**
- **KOLäººè¨­æ·±åº¦æŒ–æ˜**ï¼šä¸åªæ˜¯åŸºæœ¬è¨­å®šï¼Œè¦åŒ…å«ï¼š
  - å€‹äººæŠ•è³‡ç¶“æ­·å’Œæ•…äº‹
  - ç¨ç‰¹çš„è¡¨é”ç¿’æ…£å’Œç”¨è©
  - å°ˆæ¥­é ˜åŸŸçš„æ·±åº¦çŸ¥è­˜
  - æƒ…ç·’è¡¨é”å’Œäº’å‹•é¢¨æ ¼

#### B. **å¤šç¶­åº¦éš¨æ©ŸåŒ–å¼•æ“**
- **å…§å®¹çµæ§‹éš¨æ©ŸåŒ–**ï¼šé¿å…å›ºå®šçš„é–‹é ­-ä¸­é–“-çµå°¾çµæ§‹
- **è¡¨é”æ–¹å¼éš¨æ©ŸåŒ–**ï¼šåŒä¸€è§€é»ç”¨ä¸åŒæ–¹å¼è¡¨é”
- **äº’å‹•å…ƒç´ éš¨æ©ŸåŒ–**ï¼šéš¨æ©Ÿæ’å…¥å€‹äººåŒ–äº’å‹•å…ƒç´ 
- **æ™‚é–“ç·šéš¨æ©ŸåŒ–**ï¼šæ¨¡æ“¬ä¸åŒæ™‚é–“é»çš„ç™¼æ–‡é¢¨æ ¼

#### C. **å“è³ªæ§åˆ¶æª¢æŸ¥å™¨**
- **AIå‘³æª¢æ¸¬**ï¼šè‡ªå‹•æª¢æ¸¬ä¸¦ä¿®æ­£AIç”Ÿæˆç—•è·¡
- **å€‹äººåŒ–ç¨‹åº¦è©•ä¼°**ï¼šç¢ºä¿å…§å®¹ç¬¦åˆKOLç‰¹è‰²
- **å¤šæ¨£æ€§æª¢æŸ¥**ï¼šé¿å…å…§å®¹é‡è¤‡å’Œæ¨¡æ¿åŒ–
- **äº’å‹•æ€§è©•ä¼°**ï¼šç¢ºä¿å…§å®¹æœ‰è¶³å¤ çš„äº’å‹•å…ƒç´ 

### 3. **å¯¦æ–½æ­¥é©Ÿ**

#### éšæ®µä¸€ï¼šæ¶æ§‹çµ±ä¸€ (1-2é€±)
1. å‰µå»ºçµ±ä¸€çš„å…§å®¹ç”Ÿæˆå¼•æ“
2. æ•´åˆç¾æœ‰çš„5å€‹ç”Ÿæˆå™¨åŠŸèƒ½
3. å»ºç«‹çµ±ä¸€çš„å“è³ªæ§åˆ¶æ¨™æº–

#### éšæ®µäºŒï¼šæ·±åº¦å€‹äººåŒ– (2-3é€±)
1. æ“´å±•KOLäººè¨­æ•¸æ“šåº«
2. å¯¦ç¾æ·±åº¦å€‹äººåŒ–ç®—æ³•
3. å»ºç«‹å€‹äººåŒ–æ•ˆæœè©•ä¼°æ©Ÿåˆ¶

#### éšæ®µä¸‰ï¼šå¤šæ¨£æ€§å„ªåŒ– (1-2é€±)
1. å¯¦ç¾å¤šç¶­åº¦éš¨æ©ŸåŒ–å¼•æ“
2. å»ºç«‹å…§å®¹å¤šæ¨£æ€§æª¢æŸ¥æ©Ÿåˆ¶
3. å„ªåŒ–æ‰¹é‡ç”Ÿæˆçš„å¤šæ¨£æ€§

#### éšæ®µå››ï¼šå“è³ªæ§åˆ¶ (1é€±)
1. å¯¦ç¾AIå‘³æª¢æ¸¬å’Œä¿®æ­£
2. å»ºç«‹å…§å®¹å“è³ªè©•åˆ†ç³»çµ±
3. å»ºç«‹æŒçºŒå„ªåŒ–æ©Ÿåˆ¶

## ğŸ“‹ å…·é«”æŠ€è¡“æ”¹é€²

### 1. **çµ±ä¸€å…§å®¹ç”Ÿæˆå¼•æ“è¨­è¨ˆ**

```python
class UnifiedContentGenerator:
    """çµ±ä¸€å…§å®¹ç”Ÿæˆå¼•æ“"""
    
    def __init__(self):
        self.kol_analyzer = KOLPersonaAnalyzer()
        self.randomization_engine = MultiDimensionalRandomizer()
        self.quality_controller = ContentQualityController()
        self.personalization_engine = DeepPersonalizationEngine()
    
    async def generate_content(self, trigger_data, kol_profile, market_data):
        # 1. æ·±åº¦KOLåˆ†æ
        kol_insights = await self.kol_analyzer.analyze_kol(kol_profile)
        
        # 2. å¤šç¶­åº¦éš¨æ©ŸåŒ–
        randomization_params = self.randomization_engine.generate_params()
        
        # 3. å€‹äººåŒ–å…§å®¹ç”Ÿæˆ
        content = await self.personalization_engine.generate(
            trigger_data, kol_insights, market_data, randomization_params
        )
        
        # 4. å“è³ªæ§åˆ¶
        optimized_content = await self.quality_controller.optimize(content)
        
        return optimized_content
```

### 2. **KOLäººè¨­æ·±åº¦åˆ†æå™¨**

```python
class KOLPersonaAnalyzer:
    """KOLäººè¨­æ·±åº¦åˆ†æå™¨"""
    
    def analyze_kol(self, kol_profile):
        return {
            'personality_traits': self.extract_personality_traits(kol_profile),
            'communication_style': self.analyze_communication_style(kol_profile),
            'expertise_areas': self.identify_expertise_areas(kol_profile),
            'unique_expressions': self.extract_unique_expressions(kol_profile),
            'interaction_patterns': self.analyze_interaction_patterns(kol_profile),
            'emotional_range': self.analyze_emotional_range(kol_profile)
        }
```

### 3. **å¤šç¶­åº¦éš¨æ©ŸåŒ–å¼•æ“**

```python
class MultiDimensionalRandomizer:
    """å¤šç¶­åº¦éš¨æ©ŸåŒ–å¼•æ“"""
    
    def generate_params(self):
        return {
            'content_structure': self.randomize_structure(),
            'expression_style': self.randomize_expression(),
            'interaction_elements': self.randomize_interactions(),
            'timeline_context': self.randomize_timeline(),
            'emotional_tone': self.randomize_emotion(),
            'technical_depth': self.randomize_technical_level()
        }
```

## ğŸ¯ é æœŸæ•ˆæœ

### 1. **å…§å®¹å“è³ªæå‡**
- æ¶ˆé™¤AIå‘³ï¼Œå…§å®¹æ›´è‡ªç„¶
- å€‹äººåŒ–ç¨‹åº¦å¤§å¹…æå‡
- å…§å®¹å¤šæ¨£æ€§é¡¯è‘—æ”¹å–„

### 2. **ç³»çµ±ç¶­è­·æ€§æ”¹å–„**
- çµ±ä¸€çš„æ¶æ§‹ï¼Œæ˜“æ–¼ç¶­è­·
- æ¸…æ™°çš„æ¨¡çµ„åˆ†å·¥
- æ¨™æº–åŒ–çš„å“è³ªæ§åˆ¶

### 3. **æ‰¹é‡ç”Ÿæˆå„ªåŒ–**
- æ¯ç¯‡å…§å®¹éƒ½æœ‰ç¨ç‰¹ç‰¹è‰²
- é¿å…æ¨¡æ¿åŒ–å’Œé‡è¤‡
- ä¿æŒé«˜å“è³ªæ¨™æº–

## ğŸ“ ä¸‹ä¸€æ­¥è¡Œå‹•

1. **ç«‹å³è¡Œå‹•**ï¼šå‰µå»ºçµ±ä¸€å…§å®¹ç”Ÿæˆå¼•æ“åŸå‹
2. **çŸ­æœŸç›®æ¨™**ï¼šæ•´åˆç¾æœ‰ç”Ÿæˆå™¨åŠŸèƒ½
3. **ä¸­æœŸç›®æ¨™**ï¼šå¯¦ç¾æ·±åº¦å€‹äººåŒ–ç³»çµ±
4. **é•·æœŸç›®æ¨™**ï¼šå»ºç«‹æŒçºŒå­¸ç¿’å’Œå„ªåŒ–æ©Ÿåˆ¶


