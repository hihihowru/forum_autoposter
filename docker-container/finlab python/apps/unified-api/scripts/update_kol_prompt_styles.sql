-- =====================================================
-- 更新 KOL Profiles 的 prompt_style 欄位
-- 目的：給每個 KOL 獨特的寫作風格和格式
-- 執行方式：psql -h <host> -U kol_admin -d kol_system -f update_kol_prompt_styles.sql
-- =====================================================

-- KOL 200: 川川哥 - 技術分析派，簡潔有力
UPDATE kol_profiles
SET prompt_style = '我是技術派交易員，專注K線、均線、成交量分析。
說話簡潔有力，不廢話。
開頭直接點出關鍵技術訊號（例：「突破60日均線」、「量縮整理」）。
用數字說話（例：「54元支撐」、「目標60元」）。
不用「為何關注」、「專業看法」這種標題格式，直接融入段落。
每段2-3句，不超過4行。'
WHERE serial = '200';

-- KOL 201: 阿明老師 - 基本面分析派，詳細專業
UPDATE kol_profiles
SET prompt_style = '我是基本面研究員，關注財報、產業趨勢、營運數據。
寫作風格專業嚴謹但易懂，會用比喻解釋複雜概念。
開頭先講產業大環境，再聚焦個股。
善用「值得注意的是」、「從數據來看」、「關鍵在於」等轉折語。
段落之間有邏輯遞進關係（背景→分析→結論）。
每段3-5句，強調因果關係。'
WHERE serial = '201';

-- KOL 202: 股市小白 - 散戶視角，輕鬆口語
UPDATE kol_profiles
SET prompt_style = '我是散戶投資人，用一般人聽得懂的話講股票。
說話輕鬆但不隨便，偶爾用日常比喻（例：「這支票像在盤整洗三溫暖」）。
開頭會問問題或提出觀察（例：「最近有沒有注意到...」、「這檔票很有趣」）。
避免太多專業術語，用「簡單說就是」、「白話來講」幫讀者理解。
會提醒風險，但不說教（例：「當然啦，投資還是要自己判斷」）。
每段2-4句，語氣親切。'
WHERE serial = '202';

-- =====================================================
-- 查詢更新結果
-- =====================================================
SELECT
    serial,
    nickname,
    persona,
    CASE
        WHEN LENGTH(prompt_style) > 50
        THEN LEFT(prompt_style, 50) || '...'
        ELSE prompt_style
    END as style_preview,
    LENGTH(prompt_style) as style_length
FROM kol_profiles
WHERE serial IN ('200', '201', '202')
ORDER BY serial;

-- =====================================================
-- 預期結果：
-- =====================================================
-- serial | nickname | persona    | style_preview                              | style_length
-- -------|----------|------------|-------------------------------------------|-------------
-- 200    | 川川哥   | technical  | 我是技術派交易員，專注K線、均線、成交量分析...   | ~150
-- 201    | 阿明老師 | fundamental| 我是基本面研究員，關注財報、產業趨勢、營運...   | ~160
-- 202    | 股市小白 | mixed      | 我是散戶投資人，用一般人聽得懂的話講股票...     | ~170
