# 虛擬 KOL 投資內容生成系統

## 🎯 系統目標

打造虛擬 KOL 內容生成系統，創造有料、有觀點、能增粉的投資內容。

### 核心價值主張
1. **有料的內容**：結合股價、營收、財報、歷史回測的深度分析
2. **個人觀點**：每個 KOL 有獨特的人格特質和投資風格
3. **具體建議**：給出明確的投資建議和操作策略
4. **增粉導向**：內容設計以吸引粉絲和引發互動為目標

## 🎭 虛擬 KOL 人格系統

### 1. 技術派 KOL - "技術大師"
- **人格特質**：專業且自信
- **專長領域**：技術分析、圖表解讀、指標計算
- **內容偏好**：圖表分析、技術突破、指標解讀
- **互動風格**：專業解答，分享技術見解
- **目標受眾**：活躍交易者、技術分析愛好者

### 2. 基本面 KOL - "價值投資大師"
- **人格特質**：穩重且深思熟慮
- **專長領域**：財報分析、估值模型、產業研究
- **內容偏好**：財報解讀、基本面分析、產業趨勢
- **互動風格**：教育性分享，深度討論
- **目標受眾**：長期投資者、價值投資者

### 3. 新聞驅動 KOL - "新聞獵人"
- **人格特質**：敏銳且即時
- **專長領域**：新聞分析、政策解讀、產業趨勢
- **內容偏好**：新聞評論、趨勢分析、政策影響
- **互動風格**：即時分享，熱點討論
- **目標受眾**：短線交易者、新聞敏感者

### 4. 量化派 KOL - "數據科學家"
- **人格特質**：精確且客觀
- **專長領域**：量化分析、回測模型、統計學
- **內容偏好**：數據分析、回測驗證、方法論
- **互動風格**：數據分享，方法論討論
- **目標受眾**：量化投資者、數據愛好者

### 5. 教育型 KOL - "投資導師"
- **人格特質**：親切且耐心
- **專長領域**：投資教育、風險管理、心理學
- **內容偏好**：教育內容、風險管理、投資心理
- **互動風格**：耐心解答，教育分享
- **目標受眾**：投資新手、學習者

## 🏗️ 系統架構

### 微服務架構
```
apps/
├── ohlc-api/          # 股價資料 API
├── analyze-api/       # 技術指標分析
├── summary-api/       # 虛擬 KOL 內容生成
├── trainer/           # 互動學習與回測
packages/
└── shared/           # 共用 schemas 和工具
```

### 內容生成流程
1. **資料收集** → 股價、財報、新聞、產業數據
2. **KOL 角色選擇** → 根據主題和時機選擇合適的 KOL
3. **內容生成** → LangGraph 多代理協作生成深度內容
4. **互動預測** → 預測內容的互動潛力
5. **發布與追蹤** → 發布內容並收集互動數據
6. **學習優化** → 基於互動數據調整 KOL 策略

## 📊 API 端點

### 1. 內容生成 API
```bash
POST /generate-kol-content
{
  "stock_id": "2330",
  "kol_persona": "technical",
  "content_style": "chart_analysis",
  "target_audience": "active_traders",
  "content_length": "medium",
  "include_charts": true,
  "include_backtest": false
}
```

### 2. KOL 人格查詢
```bash
GET /kol-personas
```

### 3. 互動數據記錄
```bash
POST /log-feedback
{
  "content_id": "tech_master_2330_2024-01-01",
  "kol_id": "tech_master",
  "stock_id": "2330",
  "likes": 150,
  "comments": 25,
  "shares": 10,
  "saves": 5,
  "clicks": 500,
  "engagement_rate": 0.38,
  "sentiment_score": 0.75
}
```

### 4. KOL 表現查詢
```bash
GET /kol-performance/{kol_id}
GET /kol-performance
```

## 🎯 內容生成策略

### 技術派內容範例
```markdown
## 📈 2330 技術面深度解析 - 技術大師觀點

### 🎯 核心觀點
2330 目前處於**上升趨勢**，技術指標顯示**中性**狀態。

### 📊 關鍵技術指標
- **MA5/MA20**: 1102.30 / 1091.50 (黃金交叉)
- **RSI14**: 54.2 (中性)
- **MACD柱狀體**: 0.004 (多頭訊號)

### 🔍 技術訊號分析
- ✅ **黃金交叉**：MA5上穿MA20，多頭訊號確認
- 📈 **價漲量增**：買盤力道強勁，後市看好

### 💡 投資建議
基於技術分析，建議**買入**。

### ⚠️ 風險提醒
- 技術分析僅供參考，請結合基本面
- 注意停損設定，建議在 1091.50 附近
- 市場波動風險，投資需謹慎
```

### 基本面內容範例
```markdown
## 📊 2330 基本面深度分析 - 價值投資大師觀點

### 🎯 核心觀點
2330 基本面穩健，長期投資價值顯現。

### 📈 財務指標分析
- **營收成長**: 年增率 15.2%
- **毛利率**: 54.3% (產業平均 45.2%)
- **ROE**: 18.7% (優於同業平均 12.1%)

### 🔍 產業地位
- 全球市占率：32.1%
- 技術領先優勢：3-5年
- 客戶黏性：高

### 💡 投資建議
基於基本面分析，建議**長期持有**。
```

## 🔄 互動學習機制

### 1. 互動分數計算
```python
engagement_score = (
    likes * 0.3 + 
    comments * 0.4 + 
    shares * 0.2 + 
    saves * 0.1
) / max(1, clicks)
```

### 2. KOL 策略調整
- **內容類型優化**：根據表現調整內容類型偏好
- **人格特質調整**：根據受眾反饋調整表達方式
- **互動策略優化**：根據互動數據調整互動風格

### 3. 學習洞察
- **最佳表現內容**：識別高互動內容特徵
- **受眾偏好分析**：分析不同受眾的內容偏好
- **時機優化**：分析最佳發布時機

## 📈 表現追蹤

### KOL 表現指標
- **總發文數**：累計發文數量
- **平均互動率**：平均互動分數
- **內容類型表現**：各類型內容的表現
- **受眾偏好**：不同受眾的反應

### 內容表現分析
- **互動水平**：高/中/低互動
- **受眾反應**：正面/中性/負面
- **學習洞察**：內容優化建議

## 🚀 部署與使用

### 1. 環境設定
```bash
# 複製環境變數
cp .env.example .env

# 填入必要的 API keys
FINLAB_API_KEY=your_finlab_key
OPENAI_API_KEY=your_openai_key
GOOGLE_SERVICE_ACCOUNT_JSON=your_google_key
SHEETS_SPREADSHEET_ID=your_sheets_id
```

### 2. 啟動服務
```bash
cd infra && docker compose up --build
```

### 3. 測試虛擬 KOL
```bash
# 生成技術派 KOL 內容
curl -X POST http://localhost:8003/generate-kol-content \
  -H 'Content-Type: application/json' \
  -d '{
    "stock_id": "2330",
    "kol_persona": "technical",
    "content_style": "chart_analysis",
    "target_audience": "active_traders"
  }'
```

## 🎯 未來發展

### 1. 內容類型擴展
- **影片內容**：技術分析影片、財報解讀影片
- **直播互動**：虛擬 KOL 直播問答
- **社群互動**：虛擬 KOL 社群管理

### 2. 人格系統升級
- **動態人格**：根據互動數據動態調整人格
- **個性化內容**：根據用戶偏好個性化內容
- **多語言支援**：支援多語言內容生成

### 3. 互動機制增強
- **AI 對話**：虛擬 KOL AI 對話功能
- **用戶反饋**：更豐富的用戶反饋機制
- **社群建設**：虛擬 KOL 粉絲社群

## 📊 成功指標

### 1. 內容指標
- **互動率**：目標 > 5%
- **分享率**：目標 > 2%
- **保存率**：目標 > 1%

### 2. 用戶指標
- **粉絲增長**：月增長 > 10%
- **用戶留存**：7日留存 > 60%
- **用戶活躍**：日活躍用戶 > 1000

### 3. 商業指標
- **內容產出**：每日 > 10篇
- **內容質量**：用戶滿意度 > 4.0/5.0
- **ROI**：內容投資回報率 > 300% 