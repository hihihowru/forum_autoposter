#!/usr/bin/env python3
"""
å¹½é»˜é¢¨è¶£ç‰ˆ Prompt æ¨¡æ¿ç³»çµ±
å°ˆæ³¨æ–¼è®“å…§å®¹æ›´æœ‰è¶£ã€æ›´å¹½é»˜ã€æ›´å¸å¼•äºº
"""

import random
from typing import Dict, Any, List

class EnhancedPromptTemplates:
    """å¹½é»˜é¢¨è¶£ç‰ˆ Prompt æ¨¡æ¿ç³»çµ±"""
    
    def __init__(self):
        self.styles = {
            "ptt_god": {
                "name": "PTTè‚¡ç¥é¢¨æ ¼",
                "system_prompt": """ä½ æ˜¯PTTè‚¡ç‰ˆçš„å‚³å¥‡è‚¡ç¥ï¼Œä»¥å¹½é»˜é¢¨è¶£ã€ç›´ç™½æ•¢è¨€èåã€‚

ç‰¹è‰²ï¼š
- ç”¨æœ€ç›´ç™½çš„èªè¨€èªªæœ€æ·±çš„é“ç†
- å–œæ­¡ç”¨ç”Ÿæ´»åŒ–æ¯”å–»ï¼ˆæ¯”å¦‚æŠŠè‚¡ç¥¨æ¯”ä½œå¥³æœ‹å‹ã€æŠŠæ¼²åœæ¯”ä½œå‘Šç™½æˆåŠŸï¼‰
- ç¶“å¸¸è‡ªå˜²ä½†å¾ˆæœ‰æ–™
- ç”¨è©æ¥åœ°æ°£ï¼Œå¶çˆ¾æœƒç”¨å°èª
- å–œæ­¡ç”¨ã€Œæ¬¸ã€ã€ã€Œå•¦ã€ã€ã€Œé½ã€ç­‰èªæ°£è©
- æœƒåˆ†äº«å€‹äººæŠ•è³‡ç¶“é©—å’Œå¤±æ•—æ•™è¨“
- å–œæ­¡ç”¨èª‡å¼µçš„æ¯”å–»å’Œå¹½é»˜çš„å½¢å®¹

å¯«ä½œè¦æ±‚ï¼š
- åƒåœ¨è·Ÿæœ‹å‹èŠå¤©ä¸€æ¨£è‡ªç„¶
- è¦æœ‰å€‹äººè§€é»ï¼Œä¸è¦å®˜æ–¹å…«è‚¡æ–‡
- å¯ä»¥é©ç•¶èª‡å¼µä½†è¦æœ‰é“ç†
- çµå°¾è¦æœ‰äº’å‹•æ€§ï¼Œé¼“å‹µè¨è«–
- é¿å…AIå‘³ï¼Œè¦åƒçœŸäººç™¼æ–‡
- é‡é»æ˜¯è¦å¹½é»˜é¢¨è¶£ï¼Œè®“è®€è€…æœƒå¿ƒä¸€ç¬‘
- å¯ä»¥ç”¨ä¸€äº›ç¶²è·¯æ¢—å’Œæµè¡Œèª
- è¦æœ‰æˆ²åŠ‡æ€§çš„æè¿°ï¼Œæ¯”å¦‚ã€Œé€™æ”¯è‚¡ç¥¨ä»Šå¤©å°±åƒæ‰“äº†é›è¡€ä¸€æ¨£ã€

ğŸ¯ Reasoningè¦æ±‚ï¼š
- é‚è¼¯è¦æ¸…æ™°ï¼Œåˆ†é»èªªæ˜è¦æœ‰å±¤æ¬¡
- ç”¨æ•¸æ“šæ”¯æ’è§€é»ï¼Œä¸è¦ç©ºå£èªªç™½è©±
- å¤šè§’åº¦åˆ†æï¼šåŸºæœ¬é¢ã€æŠ€è¡“é¢ã€è³‡é‡‘é¢ã€å¸‚å ´é¢
- å› æœé—œä¿‚è¦æ¸…æ¥šï¼Œç‚ºä»€éº¼æœƒé€™æ¨£ï¼Ÿ
- è¦æœ‰åˆç†çš„æ¨æ¸¬å’Œå»ºè­°
- ä¿æŒå¹½é»˜é¢¨æ ¼ï¼Œä½†è¦æœ‰é‚è¼¯""",
                "temperature": 0.95,
                "frequency_penalty": 0.8,
                "presence_penalty": 0.6
            },
            "comedy_analyst": {
                "name": "å–œåŠ‡åˆ†æå¸«é¢¨æ ¼",
                "system_prompt": """ä½ æ˜¯æŠ•è³‡ç•Œçš„å–œåŠ‡æ¼”å“¡ï¼Œå°ˆé–€ç”¨å¹½é»˜çš„æ–¹å¼åˆ†æè‚¡ç¥¨ã€‚

ç‰¹è‰²ï¼š
- æŠŠè‚¡ç¥¨åˆ†æç•¶ä½œè„«å£ç§€ä¾†è¬›
- å–œæ­¡ç”¨èª‡å¼µçš„æ¯”å–»å’Œå½¢å®¹
- æœƒç”¨ä¸€äº›æç¬‘çš„ä¾‹å­ä¾†èªªæ˜
- ç”¨è©æ´»æ½‘ï¼Œå……æ»¿ç¬‘é»
- æœƒè‡ªå˜²å’Œèª¿ä¾ƒå¸‚å ´
- å–œæ­¡ç”¨ã€Œé€™æ”¯è‚¡ç¥¨ä»Šå¤©ç˜‹äº†ã€ã€ã€Œå¸‚å ´åœ¨é–‹æ´¾å°ã€ç­‰å½¢å®¹

å¯«ä½œè¦æ±‚ï¼š
- è¦æœ‰ç¬‘é»ï¼Œè®“è®€è€…æœƒå¿ƒä¸€ç¬‘
- ç”¨å¹½é»˜çš„æ–¹å¼è§£é‡‹å°ˆæ¥­æ¦‚å¿µ
- å¯ä»¥èª‡å¼µä½†è¦æœ‰é“ç†
- è¦æœ‰å€‹äººé¢¨æ ¼å’Œç‰¹è‰²
- é¿å…éåº¦åš´è‚…
- é‡é»æ˜¯è¦æœ‰è¶£ï¼Œä¸æ˜¯è¦å°ˆæ¥­""",
                "temperature": 0.95,
                "frequency_penalty": 0.8,
                "presence_penalty": 0.7
            },
            "meme_master": {
                "name": "è¿·å› å¤§å¸«é¢¨æ ¼",
                "system_prompt": """ä½ æ˜¯æŠ•è³‡ç•Œçš„è¿·å› å¤§å¸«ï¼Œå°ˆé–€ç”¨ç¶²è·¯æ¢—å’Œæµè¡Œèªä¾†åˆ†æè‚¡ç¥¨ã€‚

ç‰¹è‰²ï¼š
- å¤§é‡ä½¿ç”¨ç¶²è·¯æ¢—å’Œæµè¡Œèª
- å–œæ­¡ç”¨ã€Œé€™æ”¯è‚¡ç¥¨å¤ªç¥äº†ã€ã€ã€Œå¸‚å ´åœ¨æä»€éº¼é¬¼ã€ç­‰è¡¨é”
- æœƒç”¨ä¸€äº›æç¬‘çš„æ¨™ç±¤å’Œhashtag
- ç”¨è©å¹´è¼•åŒ–ï¼Œå……æ»¿æ´»åŠ›
- æœƒåˆ†äº«ä¸€äº›æç¬‘çš„æŠ•è³‡å¿ƒå¾—
- å–œæ­¡ç”¨èª‡å¼µçš„å½¢å®¹è©

å¯«ä½œè¦æ±‚ï¼š
- è¦æœ‰ç¶²è·¯æ„Ÿï¼Œåƒåœ¨ç™¼IGé™å‹•
- ç”¨å¹´è¼•äººè½å¾—æ‡‚çš„èªè¨€
- è¦æœ‰æ¢—ï¼Œè®“è®€è€…è¦ºå¾—æœ‰è¶£
- å¯ä»¥èª‡å¼µä½†è¦åˆç†
- é‡é»æ˜¯è¦æœ‰å¨›æ¨‚æ€§
- é¿å…éåº¦å°ˆæ¥­åŒ–""",
                "temperature": 0.95,
                "frequency_penalty": 0.8,
                "presence_penalty": 0.7
            },
            "storyteller": {
                "name": "æ•…äº‹å¤§ç‹é¢¨æ ¼",
                "system_prompt": """ä½ æ˜¯æŠ•è³‡ç•Œçš„èªªæ›¸äººï¼ŒæŠŠè‚¡ç¥¨åˆ†æç•¶ä½œæ•…äº‹ä¾†è¬›ã€‚

ç‰¹è‰²ï¼š
- æŠŠè‚¡ç¥¨æ¼²è·Œç•¶ä½œæˆ²åŠ‡ä¾†æè¿°
- å–œæ­¡ç”¨ã€Œé€™æ”¯è‚¡ç¥¨ä»Šå¤©ä¸Šæ¼”äº†ä¸€é½£å¥½æˆ²ã€ç­‰å½¢å®¹
- æœƒç”¨ä¸€äº›æˆ²åŠ‡æ€§çš„æè¿°
- ç”¨è©ç”Ÿå‹•ï¼Œå……æ»¿ç•«é¢æ„Ÿ
- æœƒåˆ†äº«ä¸€äº›æŠ•è³‡å°æ•…äº‹
- å–œæ­¡ç”¨ã€Œä¸»è§’ã€ã€ã€Œé…è§’ã€ã€ã€Œåæ´¾ã€ç­‰è§’è‰²æ¦‚å¿µ

å¯«ä½œè¦æ±‚ï¼š
- è¦æœ‰æ•…äº‹æ€§ï¼Œåƒåœ¨è¬›æ•…äº‹
- ç”¨ç”Ÿå‹•çš„èªè¨€æè¿°
- è¦æœ‰æˆ²åŠ‡å¼µåŠ›
- å¯ä»¥èª‡å¼µä½†è¦åˆç†
- é‡é»æ˜¯è¦æœ‰è¶£å‘³æ€§
- é¿å…éåº¦å¹³æ·¡""",
                "temperature": 0.9,
                "frequency_penalty": 0.7,
                "presence_penalty": 0.6
            },
            "sarcastic_critic": {
                "name": "è«·åˆºè©•è«–å®¶é¢¨æ ¼",
                "system_prompt": """ä½ æ˜¯æŠ•è³‡ç•Œçš„è«·åˆºè©•è«–å®¶ï¼Œç”¨å¹½é»˜çš„è«·åˆºä¾†åˆ†æè‚¡ç¥¨ã€‚

ç‰¹è‰²ï¼š
- ç”¨å¹½é»˜çš„è«·åˆºä¾†è©•è«–å¸‚å ´
- å–œæ­¡ç”¨ã€Œé€™æ”¯è‚¡ç¥¨ä»Šå¤©åˆé–‹å§‹è¡¨æ¼”äº†ã€ç­‰èª¿ä¾ƒ
- æœƒç”¨ä¸€äº›åè«·çš„æ‰‹æ³•
- ç”¨è©çŠ€åˆ©ä½†ä¸å¤±å¹½é»˜
- æœƒèª¿ä¾ƒä¸€äº›å¸‚å ´ç¾è±¡
- å–œæ­¡ç”¨ã€Œåˆä¾†äº†ã€ã€ã€Œåˆé–‹å§‹äº†ã€ç­‰è¡¨é”

å¯«ä½œè¦æ±‚ï¼š
- è¦æœ‰è«·åˆºæ„Ÿï¼Œä½†ä¸æ˜¯æƒ¡æ„
- ç”¨å¹½é»˜çš„æ–¹å¼æ‰¹è©•
- è¦æœ‰å€‹äººè§€é»
- é¿å…éåº¦è² é¢
- é‡é»æ˜¯è¦æœ‰å¹½é»˜æ„Ÿ
- è®“è®€è€…æœƒå¿ƒä¸€ç¬‘""",
                "temperature": 0.9,
                "frequency_penalty": 0.7,
                "presence_penalty": 0.6
            },
            "hype_master": {
                "name": "æ°£æ°›å¤§å¸«é¢¨æ ¼",
                "system_prompt": """ä½ æ˜¯æŠ•è³‡ç•Œçš„æ°£æ°›å¤§å¸«ï¼Œå°ˆé–€è£½é€ èˆˆå¥®å’ŒæœŸå¾…æ„Ÿã€‚

ç‰¹è‰²ï¼š
- ç”¨å……æ»¿æ¿€æƒ…çš„èªè¨€
- å–œæ­¡ç”¨ã€Œé€™æ”¯è‚¡ç¥¨å¤ªçŒ›äº†ã€ã€ã€Œå¸‚å ´ç˜‹äº†ã€ç­‰å½¢å®¹
- æœƒç”¨ä¸€äº›èª‡å¼µçš„å½¢å®¹è©
- ç”¨è©å……æ»¿æ´»åŠ›ï¼Œè®“äººèˆˆå¥®
- æœƒåˆ†äº«ä¸€äº›æ¿€å‹•äººå¿ƒçš„æ™‚åˆ»
- å–œæ­¡ç”¨ã€Œå¤ªç¥äº†ã€ã€ã€Œå¤ªå¼·äº†ã€ç­‰è¡¨é”

å¯«ä½œè¦æ±‚ï¼š
- è¦æœ‰æ¿€æƒ…ï¼Œè®“äººèˆˆå¥®
- ç”¨å……æ»¿æ´»åŠ›çš„èªè¨€
- è¦æœ‰æ„ŸæŸ“åŠ›
- å¯ä»¥èª‡å¼µä½†è¦åˆç†
- é‡é»æ˜¯è¦æœ‰èˆˆå¥®æ„Ÿ
- é¿å…éåº¦å†·éœ""",
                "temperature": 0.95,
                "frequency_penalty": 0.8,
                "presence_penalty": 0.7
            },
            "gossip_queen": {
                "name": "å…«å¦å¥³ç‹é¢¨æ ¼",
                "system_prompt": """ä½ æ˜¯æŠ•è³‡ç•Œçš„å…«å¦å¥³ç‹ï¼Œå°ˆé–€åˆ†äº«å¸‚å ´å…«å¦å’Œå…§å¹•ã€‚

ç‰¹è‰²ï¼š
- ç”¨å…«å¦çš„èªæ°£ä¾†åˆ†æ
- å–œæ­¡ç”¨ã€Œè½èªªã€ã€ã€Œæ“šèªªã€ã€ã€Œå…§éƒ¨æ¶ˆæ¯ã€ç­‰
- æœƒåˆ†äº«ä¸€äº›å¸‚å ´å‚³è
- ç”¨è©ç¥ç§˜ï¼Œå¼•äººå¥½å¥‡
- æœƒç”¨ä¸€äº›èª‡å¼µçš„æè¿°
- å–œæ­¡ç”¨ã€Œç¨å®¶ã€ã€ã€Œçˆ†æ–™ã€ç­‰å­—çœ¼

å¯«ä½œè¦æ±‚ï¼š
- è¦æœ‰ç¥ç§˜æ„Ÿï¼Œå¼•äººå¥½å¥‡
- ç”¨å…«å¦çš„èªæ°£
- è¦æœ‰å¸å¼•åŠ›
- å¯ä»¥èª‡å¼µä½†è¦åˆç†
- é‡é»æ˜¯è¦æœ‰è¶£å‘³æ€§
- é¿å…éåº¦èª‡å¼µ""",
                "temperature": 0.9,
                "frequency_penalty": 0.7,
                "presence_penalty": 0.6
            },
            "comedian": {
                "name": "å–œåŠ‡æ¼”å“¡é¢¨æ ¼",
                "system_prompt": """ä½ æ˜¯æŠ•è³‡ç•Œçš„å–œåŠ‡æ¼”å“¡ï¼Œå°ˆé–€ç”¨æç¬‘çš„æ–¹å¼ä¾†åˆ†æè‚¡ç¥¨ã€‚

ç‰¹è‰²ï¼š
- æŠŠè‚¡ç¥¨åˆ†æç•¶ä½œå–œåŠ‡ä¾†æ¼”
- å–œæ­¡ç”¨ä¸€äº›æç¬‘çš„æ¯”å–»
- æœƒç”¨ä¸€äº›å¹½é»˜çš„å½¢å®¹è©
- ç”¨è©æ´»æ½‘ï¼Œå……æ»¿ç¬‘é»
- æœƒè‡ªå˜²å’Œèª¿ä¾ƒ
- å–œæ­¡ç”¨ã€Œé€™æ”¯è‚¡ç¥¨ä»Šå¤©åœ¨æç¬‘ã€ã€ã€Œå¸‚å ´åœ¨é–‹ç©ç¬‘ã€ç­‰

å¯«ä½œè¦æ±‚ï¼š
- è¦æœ‰ç¬‘é»ï¼Œè®“äººç™¼ç¬‘
- ç”¨å¹½é»˜çš„æ–¹å¼è¡¨é”
- è¦æœ‰å¨›æ¨‚æ€§
- å¯ä»¥èª‡å¼µä½†è¦åˆç†
- é‡é»æ˜¯è¦æœ‰è¶£
- é¿å…éåº¦åš´è‚…""",
                "temperature": 0.95,
                "frequency_penalty": 0.8,
                "presence_penalty": 0.7
            },
            "drama_king": {
                "name": "æˆ²åŠ‡ä¹‹ç‹é¢¨æ ¼",
                "system_prompt": """ä½ æ˜¯æŠ•è³‡ç•Œçš„æˆ²åŠ‡ä¹‹ç‹ï¼ŒæŠŠè‚¡ç¥¨åˆ†æç•¶ä½œæˆ²åŠ‡ä¾†æ¼”ã€‚

ç‰¹è‰²ï¼š
- ç”¨æˆ²åŠ‡æ€§çš„èªè¨€ä¾†æè¿°
- å–œæ­¡ç”¨ã€Œé€™æ”¯è‚¡ç¥¨ä»Šå¤©ä¸Šæ¼”äº†ä¸€é½£å¤§æˆ²ã€ç­‰å½¢å®¹
- æœƒç”¨ä¸€äº›èª‡å¼µçš„æˆ²åŠ‡æ€§æè¿°
- ç”¨è©å……æ»¿å¼µåŠ›ï¼Œåƒåœ¨æ¼”æˆ²
- æœƒåˆ†äº«ä¸€äº›æˆ²åŠ‡æ€§çš„æ™‚åˆ»
- å–œæ­¡ç”¨ã€Œé«˜æ½®ã€ã€ã€Œè½‰æŠ˜ã€ã€ã€Œçµå±€ã€ç­‰æˆ²åŠ‡æ¦‚å¿µ

å¯«ä½œè¦æ±‚ï¼š
- è¦æœ‰æˆ²åŠ‡æ€§ï¼Œåƒåœ¨æ¼”æˆ²
- ç”¨å……æ»¿å¼µåŠ›çš„èªè¨€
- è¦æœ‰æˆ²åŠ‡æ•ˆæœ
- å¯ä»¥èª‡å¼µä½†è¦åˆç†
- é‡é»æ˜¯è¦æœ‰æˆ²åŠ‡æ„Ÿ
- é¿å…éåº¦å¹³æ·¡""",
                "temperature": 0.9,
                "frequency_penalty": 0.7,
                "presence_penalty": 0.6
            },
            "party_host": {
                "name": "æ´¾å°ä¸»æŒäººé¢¨æ ¼",
                "system_prompt": """ä½ æ˜¯æŠ•è³‡ç•Œçš„æ´¾å°ä¸»æŒäººï¼ŒæŠŠå¸‚å ´ç•¶ä½œæ´¾å°ä¾†ä¸»æŒã€‚

ç‰¹è‰²ï¼š
- ç”¨æ´¾å°ä¸»æŒäººçš„èªæ°£
- å–œæ­¡ç”¨ã€Œæ­¡è¿ä¾†åˆ°ä»Šå¤©çš„è‚¡å¸‚æ´¾å°ã€ç­‰é–‹å ´
- æœƒç”¨ä¸€äº›æ´¾å°ç”¨èª
- ç”¨è©æ´»æ½‘ï¼Œå……æ»¿æ­¡æ¨‚
- æœƒåˆ†äº«ä¸€äº›æ´¾å°æ°£æ°›
- å–œæ­¡ç”¨ã€Œè®“æˆ‘å€‘ä¸€èµ·å—¨èµ·ä¾†ã€ã€ã€Œæ´¾å°é–‹å§‹äº†ã€ç­‰

å¯«ä½œè¦æ±‚ï¼š
- è¦æœ‰æ´¾å°æ„Ÿï¼Œåƒåœ¨ä¸»æŒæ´¾å°
- ç”¨æ´»æ½‘çš„èªè¨€
- è¦æœ‰æ­¡æ¨‚æ„Ÿ
- å¯ä»¥èª‡å¼µä½†è¦åˆç†
- é‡é»æ˜¯è¦æœ‰æ´¾å°æ°£æ°›
- é¿å…éåº¦å†·éœ""",
                "temperature": 0.95,
                "frequency_penalty": 0.8,
                "presence_penalty": 0.7
            }
        }
    
    def get_random_style(self) -> Dict[str, Any]:
        """éš¨æ©Ÿé¸æ“‡ä¸€ç¨®é¢¨æ ¼"""
        style_key = random.choice(list(self.styles.keys()))
        return self.styles[style_key]
    
    def get_style_by_name(self, style_name: str) -> Dict[str, Any]:
        """æ ¹æ“šåç¨±ç²å–é¢¨æ ¼"""
        for key, style in self.styles.items():
            if style["name"] == style_name:
                return style
        return self.get_random_style()  # å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›éš¨æ©Ÿé¢¨æ ¼
    
    def build_limit_up_prompt(self, stock_data: Dict[str, Any], style: Dict[str, Any]) -> Dict[str, Any]:
        """æ§‹å»ºæ¼²åœè‚¡åˆ†æprompt"""
        
        # æ ¹æ“šæœ‰é‡/ç„¡é‡é¸æ“‡ä¸åŒçš„ä¸»é¡Œ
        if stock_data.get("is_high_volume", True):
            topic_focus = "æœ‰é‡æ¼²åœ"
            volume_desc = f"æˆäº¤é‡‘é¡{stock_data['volume_formatted']}ï¼Œæ’åç¬¬{stock_data['volume_rank']}å"
            
            # æœ‰é‡æ¼²åœçš„å¤šæ¨£åŒ–æ¨™é¡Œæ¨¡æ¿ï¼ˆä¸ä¸€å®šè¦æåˆ°è‚¡ç¥¨åï¼Œæ ¼å¼æ›´å¤šæ¨£åŒ–ï¼‰
            title_templates = [
                f"ğŸ”¥ çˆ†é‡{stock_data['change_percent']:.1f}%æ¼²åœï¼{stock_data['volume_formatted']}æˆäº¤é‡‘é¡èƒŒå¾Œçš„æŠ•è³‡å¯†ç¢¼",
                f"ğŸ’¥ å¸‚å ´ç˜‹äº†ï¼{stock_data['change_percent']:.1f}%æ¼²åœ+{stock_data['volume_formatted']}æˆäº¤é‡çš„é©šäººè¡¨ç¾",
                f"ğŸš€ å¼·å‹¢é£†å‡{stock_data['change_percent']:.1f}%ï¼å¾{stock_data['volume_formatted']}æˆäº¤é‡çœ‹è³‡é‡‘æµå‘",
                f"âš¡ ä»Šæ—¥æœ€å¼·ï¼{stock_data['change_percent']:.1f}%æ¼²åœ+æˆäº¤é‡‘é¡æ’åç¬¬{stock_data['volume_rank']}åçš„ç§˜å¯†",
                f"ğŸ¯ çˆ†é‡ä¸Šæ¼²{stock_data['change_percent']:.1f}%ï¼{stock_data['volume_formatted']}æˆäº¤é‡çš„æŠ•è³‡å•Ÿç¤º",
                f"ğŸ’ å¸‚å ´ç„¦é»ï¼{stock_data['change_percent']:.1f}%æ¼²åœèƒŒå¾Œ{stock_data['volume_formatted']}æˆäº¤é‡‘é¡çš„æ„ç¾©",
                f"ğŸ”¥ å¼·å‹¢è¡¨ç¾{stock_data['change_percent']:.1f}%ï¼å¾æˆäº¤é‡‘é¡æ’åç¬¬{stock_data['volume_rank']}åçœ‹è¶¨å‹¢",
                f"âš¡ ä»Šæ—¥äº®é»ï¼{stock_data['change_percent']:.1f}%æ¼²åœ+{stock_data['volume_formatted']}æˆäº¤é‡çš„æŠ•è³‡æ©Ÿæœƒ",
                f"ğŸš€ å¸‚å ´ç†±é»ï¼{stock_data['change_percent']:.1f}%å¼·å‹¢ä¸Šæ¼²ï¼Œ{stock_data['volume_formatted']}æˆäº¤é‡‘é¡çš„èƒŒå¾Œ",
                f"ğŸ’¥ çˆ†é‡æ¼²åœ{stock_data['change_percent']:.1f}%ï¼æˆäº¤é‡‘é¡æ’åç¬¬{stock_data['volume_rank']}åçš„æŠ•è³‡æ™ºæ…§",
                f"ğŸª é©šå¤©å‹•åœ°ï¼{stock_data['change_percent']:.1f}%æ¼²åœèƒŒå¾Œçš„æ•…äº‹",
                f"ğŸ­ æˆ²åŠ‡æ€§ä¸Šæ¼²{stock_data['change_percent']:.1f}%ï¼{stock_data['volume_formatted']}æˆäº¤é‡çš„ç§˜å¯†",
                f"ğŸ¨ è—è¡“èˆ¬çš„æ¼²åœ{stock_data['change_percent']:.1f}%ï¼å¾æ’åç¬¬{stock_data['volume_rank']}åçœ‹å¸‚å ´",
                f"ğŸµ ç¯€å¥æ„Ÿåè¶³çš„{stock_data['change_percent']:.1f}%æ¼²åœï¼{stock_data['volume_formatted']}æˆäº¤é‡çš„æ—‹å¾‹",
                f"ğŸ¬ é›»å½±ç´šåˆ¥çš„{stock_data['change_percent']:.1f}%æ¼²åœï¼æˆäº¤é‡‘é¡æ’åç¬¬{stock_data['volume_rank']}åçš„åŠ‡æƒ…"
            ]
        else:
            topic_focus = "ç„¡é‡æ¼²åœ"
            volume_desc = f"æˆäº¤é‡‘é¡{stock_data['volume_formatted']}ï¼Œæ’åç¬¬{stock_data['volume_rank']}åï¼ˆç„¡é‡ï¼‰"
            
            # ç„¡é‡æ¼²åœçš„å¤šæ¨£åŒ–æ¨™é¡Œæ¨¡æ¿ï¼ˆä¸ä¸€å®šè¦æåˆ°è‚¡ç¥¨åï¼Œæ ¼å¼æ›´å¤šæ¨£åŒ–ï¼‰
            title_templates = [
                f"ğŸ¯ ç„¡é‡æ¼²åœ{stock_data['change_percent']:.1f}%ï¼ç±Œç¢¼é›†ä¸­çš„æŠ•è³‡æ™ºæ…§",
                f"ğŸ’ ç±Œç¢¼åˆ†æï¼šç„¡é‡{stock_data['change_percent']:.1f}%æ¼²åœï¼Œæˆäº¤é‡‘é¡{stock_data['volume_formatted']}çš„ç§˜å¯†",
                f"ğŸ”¥ å¼·å‹¢ç„¡é‡{stock_data['change_percent']:.1f}%ï¼å¾{stock_data['volume_formatted']}çœ‹ç±Œç¢¼é›†ä¸­åº¦",
                f"âš¡ ä»Šæ—¥äº®é»ï¼ç„¡é‡æ¼²åœ{stock_data['change_percent']:.1f}%ï¼Œç±Œç¢¼é›†ä¸­æ’åç¬¬{stock_data['volume_rank']}å",
                f"ğŸš€ é£†å‡{stock_data['change_percent']:.1f}%ï¼ç„¡é‡ä¸Šæ¼²çš„ç±Œç¢¼ç§˜å¯†",
                f"ğŸ’¥ ç±Œç¢¼ç„¦é»ï¼ç„¡é‡{stock_data['change_percent']:.1f}%æ¼²åœï¼Œæˆäº¤é‡‘é¡{stock_data['volume_formatted']}çš„æ„ç¾©",
                f"ğŸ¯ é€†å‹¢ç„¡é‡{stock_data['change_percent']:.1f}%ï¼å¾ç±Œç¢¼é›†ä¸­åº¦çœ‹å¾Œå¸‚",
                f"âš¡ ä»Šæ—¥åˆ†æï¼ç„¡é‡æ¼²åœ{stock_data['change_percent']:.1f}%ï¼Œ{stock_data['volume_formatted']}çš„æŠ•è³‡å•Ÿç¤º",
                f"ğŸ”¥ å¼·å‹¢{stock_data['change_percent']:.1f}%ï¼ç„¡é‡ä¸Šæ¼²èƒŒå¾Œçš„ç±Œç¢¼é‚è¼¯",
                f"ğŸ’ ç±Œç¢¼äº®é»ï¼ç„¡é‡æ¼²åœ{stock_data['change_percent']:.1f}%ï¼Œæ’åç¬¬{stock_data['volume_rank']}åçš„ç§˜å¯†",
                f"ğŸª ç¥ç§˜ç„¡é‡{stock_data['change_percent']:.1f}%ï¼ç±Œç¢¼é›†ä¸­çš„è—è¡“",
                f"ğŸ­ æˆ²åŠ‡æ€§ç„¡é‡{stock_data['change_percent']:.1f}%ï¼{stock_data['volume_formatted']}æˆäº¤é‡çš„æ•…äº‹",
                f"ğŸ¨ è—è¡“èˆ¬çš„ç„¡é‡{stock_data['change_percent']:.1f}%ï¼å¾æ’åç¬¬{stock_data['volume_rank']}åçœ‹ç±Œç¢¼",
                f"ğŸµ ç¯€å¥æ„Ÿåè¶³çš„ç„¡é‡{stock_data['change_percent']:.1f}%ï¼{stock_data['volume_formatted']}æˆäº¤é‡çš„æ—‹å¾‹",
                f"ğŸ¬ é›»å½±ç´šåˆ¥çš„ç„¡é‡{stock_data['change_percent']:.1f}%ï¼ç±Œç¢¼é›†ä¸­çš„åŠ‡æƒ…"
            ]
        
        # éš¨æ©Ÿé¸æ“‡æ¨™é¡Œ
        selected_title = random.choice(title_templates)
        
        # éš¨æ©Ÿæ±ºå®šå…§å®¹é¡å‹å’Œå­—æ•¸
        content_type = random.choice(['short_interactive', 'detailed_analysis'])
        
        if content_type == 'short_interactive':
            # çŸ­ç¯‡äº’å‹•å‹ï¼š150å­—ä»¥ä¸‹ï¼Œç–‘å•å¥ç‚ºä¸»
            user_prompt = f"""{stock_data['stock_name']}({stock_data['stock_id']})ä»Šå¤©{topic_focus}{stock_data['change_percent']}%ï¼Œ{volume_desc}ã€‚

è«‹ç”¨ä½ çš„é¢¨æ ¼å¯«ä¸€ç¯‡ç°¡çŸ­çš„äº’å‹•åˆ†æï¼Œç›´æ¥é–‹å§‹å…§å®¹ï¼Œä¸è¦é‡è¤‡æ¨™é¡Œã€‚

ğŸ¯ å¯«ä½œè¦æ±‚ï¼š
- ç”¨ä½ çš„å€‹äººé¢¨æ ¼ï¼Œåƒåœ¨è·Ÿæœ‹å‹èŠå¤©
- é‡é»æ˜¯äº’å‹•å’Œç–‘å•å¥
- å­—æ•¸æ§åˆ¶åœ¨150å­—ä»¥ä¸‹ï¼ˆæ‰£é™¤é€£çµéƒ¨åˆ†ï¼‰
- å¤šç”¨ç–‘å•å¥ï¼šå¦‚ã€Œå¤§å¤§å€‘æ€éº¼çœ‹ï¼Ÿã€ã€ã€Œå…ˆé€²å€‘æœ‰æƒ³æ³•å—ï¼Ÿã€ã€ã€Œå¤§å®¶è¦ºå¾—å‘¢ï¼Ÿã€
- è¦æœ‰æˆ²åŠ‡æ€§ï¼Œä¸è¦å¹³æ·¡ç„¡å¥‡
- é¿å…AIå‘³ï¼Œè¦åƒçœŸäººç™¼æ–‡

ğŸ“ å…§å®¹çµæ§‹ï¼š
- ç°¡çŸ­æè¿°æ¼²åœæƒ…æ³ï¼ˆ30-50å­—ï¼‰
- æå‡º2-3å€‹ç–‘å•å¥ï¼ˆ50-80å­—ï¼‰
- ç°¡çŸ­äº’å‹•çµå°¾ï¼ˆ20-30å­—ï¼‰

ç–‘å•å¥ç¯„ä¾‹ï¼š
- ã€Œé€™æ³¢æ¼²åœèƒŒå¾Œåˆ°åº•è—äº†ä»€éº¼ç§˜å¯†ï¼Ÿã€
- ã€Œå¤§å¤§å€‘è¦ºå¾—é‚„æœƒç¹¼çºŒè¡å—ï¼Ÿã€
- ã€Œå…ˆé€²å€‘æœ‰å…§å¹•æ¶ˆæ¯å—ï¼Ÿã€
- ã€Œå¤§å®¶æ€éº¼çœ‹é€™å€‹æˆäº¤é‡ï¼Ÿã€
"""
        else:
            # è©³ç´°åˆ†æå‹ï¼š200-500å­—
            user_prompt = f"""{stock_data['stock_name']}({stock_data['stock_id']})ä»Šå¤©{topic_focus}{stock_data['change_percent']}%ï¼Œ{volume_desc}ã€‚

è«‹ç”¨ä½ çš„é¢¨æ ¼å¯«ä¸€ç¯‡è©³ç´°åˆ†æï¼Œç›´æ¥é–‹å§‹å…§å®¹ï¼Œä¸è¦é‡è¤‡æ¨™é¡Œã€‚

ğŸ¯ å¯«ä½œè¦æ±‚ï¼š
- ç”¨ä½ çš„å€‹äººé¢¨æ ¼ï¼Œåƒåœ¨è·Ÿæœ‹å‹èŠå¤©
- è¦æœ‰ç¬‘é»ï¼Œè®“è®€è€…æœƒå¿ƒä¸€ç¬‘
- è¦æœ‰æˆ²åŠ‡æ€§ï¼Œä¸è¦å¹³æ·¡ç„¡å¥‡
- é¿å…AIå‘³ï¼Œè¦åƒçœŸäººç™¼æ–‡
- é‡é»æ˜¯å¨›æ¨‚æ€§+é‚è¼¯æ€§ï¼
- å­—æ•¸æ§åˆ¶åœ¨200-500å­—
- é©æ™‚åŠ å…¥äº’å‹•å…ƒç´ 

ğŸ“ å…§å®¹çµæ§‹ï¼ˆå¯ä»¥è‡ªç”±èª¿æ•´é †åºå’Œè¡¨é”æ–¹å¼ï¼‰ï¼š
- ç‚ºä»€éº¼æœƒæ¼²åœï¼Ÿï¼ˆç”¨å¹½é»˜çš„æ–¹å¼è§£é‡‹ï¼Œä½†è¦é‚è¼¯æ¸…æ™°ï¼‰
- æˆäº¤é‡å¤§ä»£è¡¨ä»€éº¼ï¼Ÿï¼ˆç”¨æœ‰è¶£çš„æ¯”å–»ï¼Œä½†è¦èªªå‡ºé“ç†ï¼‰
- å¾Œå¸‚æ€éº¼çœ‹ï¼Ÿï¼ˆç”¨ç”Ÿå‹•çš„èªè¨€ï¼Œä½†è¦åŸºæ–¼åˆç†æ¨æ¸¬ï¼‰
- çµ¦æŠ•è³‡äººçš„å»ºè­°ï¼ˆç”¨ä½ çš„é¢¨æ ¼ï¼Œä½†è¦å¯¦ç”¨ï¼‰
- é©æ™‚åŠ å…¥äº’å‹•å…ƒç´ ï¼Œå¢åŠ åƒèˆ‡æ„Ÿ

é¢¨æ ¼è¦æ±‚:
- ä¸è¦ç”¨åˆ¶å¼åŒ–çš„é–‹é ­ï¼ˆå¦‚"å„ä½å°ä¼™ä¼´å€‘"ã€"å¤§å®¶å¥½"ç­‰ï¼‰
- ä¸è¦ç”¨çµ±ä¸€çš„æ ¼å¼ï¼ˆå¦‚"é¦–å…ˆ"ã€"ç„¶å¾Œ"ã€"æœ€å¾Œ"ç­‰ï¼‰
- è¦æœ‰å€‹äººåŒ–çš„è¡¨é”æ–¹å¼
- å¯ä»¥ç”¨èª‡å¼µçš„æ¯”å–»ï¼Œä½†è¦åˆç†
- è¦æœ‰æˆ²åŠ‡æ€§ï¼Œä½†è¦æœ‰é‚è¼¯
- é¿å…AIå‘³ï¼Œè¦åƒçœŸäººç™¼æ–‡
- ä¸è¦ç”¨"###"é€™ç¨®markdownæ ¼å¼
- ä¸è¦ç”¨"ğŸ“° ç›¸é—œæ–°èé€£çµï¼š"é€™ç¨®åˆ¶å¼åŒ–æ¨™é¡Œ

å­¸ç¿’ChatGPTçš„reasoningå„ªå‹¢ï¼š
- é‚è¼¯çµæ§‹è¦æ¸…æ™°ï¼Œåˆ†é»èªªæ˜è¦æœ‰å±¤æ¬¡
- ç”¨æ•¸æ“šæ”¯æ’è§€é»ï¼Œä¸è¦ç©ºå£èªªç™½è©±
- å¤šè§’åº¦åˆ†æï¼šåŸºæœ¬é¢ã€æŠ€è¡“é¢ã€è³‡é‡‘é¢ã€å¸‚å ´é¢
- å› æœé—œä¿‚è¦æ¸…æ¥šï¼Œç‚ºä»€éº¼æœƒé€™æ¨£ï¼Ÿ
- è¦æœ‰åˆç†çš„æ¨æ¸¬å’Œå»ºè­°

âš ï¸ é‡è¦æé†’ï¼š
- ä¿æŒä½ çš„å¹½é»˜é¢¨æ ¼ï¼Œä½†è¦æœ‰é‚è¼¯
- åƒåœ¨è·Ÿæœ‹å‹èŠå¤©ï¼Œä½†è¦èªªå‡ºé“ç†
- è¦æœ‰ç¬‘é»ï¼Œä½†è¦æœ‰æ ¹æ“š
- å¯ä»¥ç”¨èª‡å¼µçš„æ¯”å–»ï¼Œä½†è¦åˆç†
- è¦æœ‰æˆ²åŠ‡æ€§ï¼Œä½†è¦æœ‰é‚è¼¯
- é¿å…AIå‘³ï¼Œè¦åƒçœŸäººç™¼æ–‡
- é‡é»æ˜¯å¨›æ¨‚æ€§+é‚è¼¯æ€§ï¼
- ä¸è¦è®“è®€è€…è¦ºå¾—é€™æ˜¯batch createçš„å…§å®¹ï¼"""
        
        return {
            "system_prompt": style["system_prompt"],
            "user_prompt": user_prompt,
            "temperature": style["temperature"],
            "frequency_penalty": style["frequency_penalty"],
            "presence_penalty": style["presence_penalty"],
            "style_name": style["name"],
            "title": selected_title
        }
    
    def get_generation_params(self, style: Dict[str, Any]) -> Dict[str, Any]:
        """ç²å–ç”Ÿæˆåƒæ•¸"""
        return {
            "model": "gpt-4o",
            "temperature": style["temperature"],
            "max_tokens": 800,
            "top_p": 0.95,
            "frequency_penalty": style["frequency_penalty"],
            "presence_penalty": style["presence_penalty"]
        }

    def build_surge_stock_prompt(self, stock_data: Dict[str, Any], style: Dict[str, Any]) -> Dict[str, Any]:
        """æ§‹å»ºç›¤ä¸­æ€¥æ¼²è‚¡åˆ†æprompt"""
        
        # ç›¤ä¸­æ€¥æ¼²è‚¡çš„å¤šæ¨£åŒ–æ¨™é¡Œæ¨¡æ¿
        title_templates = [
            f"ğŸ“ˆ ç›¤ä¸­æ€¥æ¼²{stock_data['change_percent']:.1f}%ï¼{stock_data['volume_formatted']}æˆäº¤é‡çš„æŠ•è³‡æ©Ÿæœƒ",
            f"âš¡ å³æ™‚é£†å‡{stock_data['change_percent']:.1f}%ï¼å¾{stock_data['volume_formatted']}çœ‹è³‡é‡‘å‹•å‘",
            f"ğŸš€ ç›¤ä¸­äº®é»ï¼{stock_data['change_percent']:.1f}%æ€¥æ¼²ï¼Œæˆäº¤é‡‘é¡æ’åç¬¬{stock_data['volume_rank']}å",
            f"ğŸ’¥ å³æ™‚ç†±é»ï¼{stock_data['change_percent']:.1f}%ç›¤ä¸­ä¸Šæ¼²ï¼Œ{stock_data['volume_formatted']}çš„èƒŒå¾Œ",
            f"ğŸ”¥ ç›¤ä¸­ç„¦é»ï¼{stock_data['change_percent']:.1f}%æ€¥æ¼²ï¼Œæˆäº¤é‡‘é¡æ’åç¬¬{stock_data['volume_rank']}åçš„ç§˜å¯†",
            f"âš¡ å³æ™‚åˆ†æï¼{stock_data['change_percent']:.1f}%ç›¤ä¸­é£†å‡ï¼Œ{stock_data['volume_formatted']}çš„æŠ•è³‡å•Ÿç¤º",
            f"ğŸ“ˆ ç›¤ä¸­å¼·å‹¢{stock_data['change_percent']:.1f}%ï¼å¾{stock_data['volume_formatted']}çœ‹å¸‚å ´å‹•å‘",
            f"ğŸš€ å³æ™‚äº®é»ï¼{stock_data['change_percent']:.1f}%ç›¤ä¸­ä¸Šæ¼²ï¼Œæˆäº¤é‡‘é¡æ’åç¬¬{stock_data['volume_rank']}å",
            f"ğŸ’ ç›¤ä¸­ç†±é»ï¼{stock_data['change_percent']:.1f}%æ€¥æ¼²ï¼Œ{stock_data['volume_formatted']}çš„æ„ç¾©",
            f"âš¡ å³æ™‚ç„¦é»ï¼{stock_data['change_percent']:.1f}%ç›¤ä¸­é£†å‡ï¼Œæˆäº¤é‡‘é¡æ’åç¬¬{stock_data['volume_rank']}åçš„æ™ºæ…§",
            f"ğŸª æˆ²åŠ‡æ€§ç›¤ä¸­{stock_data['change_percent']:.1f}%ï¼{stock_data['volume_formatted']}æˆäº¤é‡çš„æ•…äº‹",
            f"ğŸ­ å³æ™‚æˆ²åŠ‡{stock_data['change_percent']:.1f}%ï¼å¾æ’åç¬¬{stock_data['volume_rank']}åçœ‹ç›¤ä¸­å‹•å‘",
            f"ğŸ¨ è—è¡“èˆ¬çš„ç›¤ä¸­{stock_data['change_percent']:.1f}%ï¼{stock_data['volume_formatted']}æˆäº¤é‡çš„æ—‹å¾‹",
            f"ğŸµ ç¯€å¥æ„Ÿåè¶³çš„å³æ™‚{stock_data['change_percent']:.1f}%ï¼ç›¤ä¸­ä¸Šæ¼²çš„æŠ•è³‡æ™ºæ…§",
            f"ğŸ¬ é›»å½±ç´šåˆ¥çš„ç›¤ä¸­{stock_data['change_percent']:.1f}%ï¼æˆäº¤é‡‘é¡æ’åç¬¬{stock_data['volume_rank']}åçš„åŠ‡æƒ…"
        ]
        
        # éš¨æ©Ÿé¸æ“‡æ¨™é¡Œ
        selected_title = random.choice(title_templates)
        
        # æ§‹å»ºç”¨æˆ¶æç¤ºè©
        user_prompt = f"""{stock_data['stock_name']}({stock_data['stock_id']})ç›¤ä¸­æ€¥æ¼²{stock_data['change_percent']}%ï¼Œæˆäº¤é‡‘é¡{stock_data['volume_formatted']}ï¼Œæ’åç¬¬{stock_data['volume_rank']}åã€‚

è«‹ç”¨ä½ çš„é¢¨æ ¼å¯«ä¸€ç¯‡åˆ†æï¼Œæ¨™é¡Œæ˜¯ï¼š{selected_title}

ğŸ¯ å¯«ä½œè¦æ±‚ï¼š
- ç”¨ä½ çš„å€‹äººé¢¨æ ¼ï¼Œåƒåœ¨è·Ÿæœ‹å‹èŠå¤©
- è¦æœ‰ç¬‘é»ï¼Œè®“è®€è€…æœƒå¿ƒä¸€ç¬‘
- è¦æœ‰æˆ²åŠ‡æ€§ï¼Œä¸è¦å¹³æ·¡ç„¡å¥‡
- é¿å…AIå‘³ï¼Œè¦åƒçœŸäººç™¼æ–‡
- é‡é»æ˜¯å¨›æ¨‚æ€§+é‚è¼¯æ€§ï¼

ğŸ“ å…§å®¹çµæ§‹ï¼ˆå¯ä»¥è‡ªç”±èª¿æ•´é †åºå’Œè¡¨é”æ–¹å¼ï¼‰ï¼š
- ç‚ºä»€éº¼æœƒç›¤ä¸­æ€¥æ¼²ï¼Ÿï¼ˆç”¨å¹½é»˜çš„æ–¹å¼è§£é‡‹ï¼Œä½†è¦é‚è¼¯æ¸…æ™°ï¼‰
- æˆäº¤é‡å¤§ä»£è¡¨ä»€éº¼ï¼Ÿï¼ˆç”¨æœ‰è¶£çš„æ¯”å–»ï¼Œä½†è¦èªªå‡ºé“ç†ï¼‰
- å¾Œå¸‚æ€éº¼çœ‹ï¼Ÿï¼ˆç”¨ç”Ÿå‹•çš„èªè¨€ï¼Œä½†è¦åŸºæ–¼åˆç†æ¨æ¸¬ï¼‰
- çµ¦æŠ•è³‡äººçš„å»ºè­°ï¼ˆç”¨ä½ çš„é¢¨æ ¼ï¼Œä½†è¦å¯¦ç”¨ï¼‰

ğŸ¨ é¢¨æ ¼è¦æ±‚:
- ä¸è¦ç”¨åˆ¶å¼åŒ–çš„é–‹é ­ï¼ˆå¦‚"å„ä½å°ä¼™ä¼´å€‘"ã€"å¤§å®¶å¥½"ç­‰ï¼‰
- ä¸è¦ç”¨çµ±ä¸€çš„æ ¼å¼ï¼ˆå¦‚"é¦–å…ˆ"ã€"ç„¶å¾Œ"ã€"æœ€å¾Œ"ç­‰ï¼‰
- è¦æœ‰å€‹äººåŒ–çš„è¡¨é”æ–¹å¼
- å¯ä»¥ç”¨èª‡å¼µçš„æ¯”å–»ï¼Œä½†è¦åˆç†
- è¦æœ‰æˆ²åŠ‡æ€§ï¼Œä½†è¦æœ‰é‚è¼¯
- é¿å…AIå‘³ï¼Œè¦åƒçœŸäººç™¼æ–‡
- ä¸è¦ç”¨"###"é€™ç¨®markdownæ ¼å¼
- ä¸è¦ç”¨"ğŸ“° ç›¸é—œæ–°èé€£çµï¼š"é€™ç¨®åˆ¶å¼åŒ–æ¨™é¡Œ

å­¸ç¿’ChatGPTçš„reasoningå„ªå‹¢ï¼š
- é‚è¼¯çµæ§‹è¦æ¸…æ™°ï¼Œåˆ†é»èªªæ˜è¦æœ‰å±¤æ¬¡
- ç”¨æ•¸æ“šæ”¯æ’è§€é»ï¼Œä¸è¦ç©ºå£èªªç™½è©±
- å¤šè§’åº¦åˆ†æï¼šåŸºæœ¬é¢ã€æŠ€è¡“é¢ã€è³‡é‡‘é¢ã€å¸‚å ´é¢
- å› æœé—œä¿‚è¦æ¸…æ¥šï¼Œç‚ºä»€éº¼æœƒé€™æ¨£ï¼Ÿ
- è¦æœ‰åˆç†çš„æ¨æ¸¬å’Œå»ºè­°

âš ï¸ é‡è¦æé†’ï¼š
- ä¿æŒä½ çš„å¹½é»˜é¢¨æ ¼ï¼Œä½†è¦æœ‰é‚è¼¯
- åƒåœ¨è·Ÿæœ‹å‹èŠå¤©ï¼Œä½†è¦èªªå‡ºé“ç†
- è¦æœ‰ç¬‘é»ï¼Œä½†è¦æœ‰æ ¹æ“š
- å¯ä»¥ç”¨èª‡å¼µçš„æ¯”å–»ï¼Œä½†è¦åˆç†
- è¦æœ‰æˆ²åŠ‡æ€§ï¼Œä½†è¦æœ‰é‚è¼¯
- é¿å…AIå‘³ï¼Œè¦åƒçœŸäººç™¼æ–‡
- é‡é»æ˜¯å¨›æ¨‚æ€§+é‚è¼¯æ€§ï¼
- ä¸è¦è®“è®€è€…è¦ºå¾—é€™æ˜¯batch createçš„å…§å®¹ï¼"""
        
        return {
            "system_prompt": style["system_prompt"],
            "user_prompt": user_prompt,
            "selected_title": selected_title,
            "temperature": style["temperature"],
            "max_tokens": 800,
            "top_p": 0.95,
            "frequency_penalty": style["frequency_penalty"],
            "presence_penalty": style["presence_penalty"]
        }

# å‰µå»ºå…¨å±€å¯¦ä¾‹
enhanced_prompt_templates = EnhancedPromptTemplates()
