[build]
builder = "nixpacks"

[deploy]
startCommand = "cd docker-container/finlab\ python/apps/dashboard-backend && python -c \"import os; port = os.environ.get('PORT', '8000'); os.system(f'uvicorn src.main:app --host 0.0.0.0 --port {port}')\""

[build.environment]
PYTHON_VERSION = "3.11"

[build.nixpacks]
provider = "python"

[[services]]
name = "dashboard-backend"
port = 8000

[env]
DATABASE_URL = { type = "string", required = true }
PORT = "8000"
# Add other required environment variables here
PYTHONPATH = "/app/docker-container/finlab python/apps/dashboard-backend"

[healthcheck]
timeout = 60
interval = 30
retries = 5
