"""
ç°¡åŒ–ç‰ˆå…§å®¹æ¨¡å¼åˆ†ææ¸¬è©¦
"""

import re
from typing import Dict, List, Any

class SimpleContentAnalyzer:
    """ç°¡åŒ–ç‰ˆå…§å®¹åˆ†æå™¨"""
    
    def __init__(self):
        # åŸºæ–¼æä¾›çš„äº”ç¯‡ç¯„ä¾‹é€²è¡Œåˆ†æ
        self.examples = [
            {
                "content": "ç„¡äººæ©Ÿ å°±é€™æª”å¤§å‹è‚¡ æ¯”è¼ƒæ…¢ç‰› ï¼ä½†æ˜¯æ¼¢ç¿”ç•¢ç«Ÿæ˜¯é¾é ­ï¼Œç„¡äººæ©Ÿçš„ååˆ¶ç³»çµ±åœ‹å…§æ›´æ˜¯å°‘äººèƒ½åšï¼Œä¹Ÿæ˜¯å”¯ä¸€åœ‹é˜²éƒ¨å¯ä»¥èªè­‰çš„ï¼Œ2024 å¹´ 6 æœˆï¼Œæ¼¢ç¿”èˆ‡ç¾åœ‹ AEVEX Aerospace ç°½ç½²åˆä½œå‚™å¿˜éŒ„ï¼Œè¨ˆç•«å…±åŒç™¼å±•ã€Œç©ºä¸­ï¼åœ°é¢ç„¡äººè£å‚™ç³»çµ±ã€ï¼Œæ¨™èªŒæ¼¢ç¿”æ­£å¼é€²è»ç„¡äººæ©Ÿå¸‚å ´ã€‚ç„¡äººæ©Ÿæ—ç¾¤ è²¢ç»ç‡Ÿæ”¶å¯èƒ½éƒ½è¨€ä¹‹éæ—©ï¼Œ2027å¹´ æ‰é€²å…¥ä¸€å€‹èµ·é£›æœŸï¼Œç¾åœ¨å‰‡æ˜¯é•·ç·šçš„æŠ•è³‡è€ƒé‡ ï¼Œæœ€å¥½åˆ¥ç•¶é£ˆè‚¡çœ‹å¾… çª®è¿½ä¸æ¨â‹¯â‹¯",
                "engagement": "medium",
                "type": "stock_analysis"
            },
            {
                "content": "ä¸çŸ¥é“æ˜¯ä¸­æš‘é‚„æ˜¯ç†±æ„Ÿå†’ï¼Œ\né€™ç¨®é…·æš‘æœçœŸä¸èƒ½åœ¨å¤–é¢è¶´è¶´èµ°ã€‚\næ˜å¤©è¦å¾…åœ¨é…’åº—å¥½å¥½ä¼‘æ¯ã€‚\n\nä»Šå¤©é»ƒå¾©å¥å¸«å¿µåŠ›éš”æµ·ç™¼åŠŸï¼Œ\nç¾åœ¨æ˜¯ä¸æ˜¯å™´å™´ï¼Ÿ\nåŠ å¯†ã€æµ·æœŸã€å¤œç›¤ä¸€èµ·é–‹è¶´æ›¿ï¼Œ\næ‹œè¨—è¦æ’æ•´æ™šä¸è¦åœ~\n\nå¤§å®¶æ™šå®‰ï¼Œæˆ‘æ˜¯èæ‹‰â¤ï¸",
                "engagement": "high",
                "type": "personal_share"
            },
            {
                "content": "å¦‚æ¨™é¡Œ\n\nä»Šå¤©æ²’æœ‰å¤ªå¤šæƒ³è¬›çš„æ±è¥¿\n\nåªæœ‰é‡‘å±…é‚£å€‹\n\nå¾ˆå¤šäººå†å•æ˜¯ä»€éº¼æ„æ€\n\nå¤§é«”ä¾†èªªå°±æ˜¯æœŸè²¨æµé€šé‡ä¸å¤ \n\nç©ºå–®å¿«æ­»å…‰äº†\n\nåŸå› æ˜¯åœ¨æ–¼\n\n1ã€ç±Œç¢¼éåº¦é›†ä¸­æŒæ¡åœ¨å°‘æ•¸äººæ‰‹ä¸Š\n2ã€ç¾è‚¡è™•ç½®å°è‡´æœŸè²¨éæ–¼é›†ä¸­\n\nè‡³æ–¼èªªæ”¾ç©ºçš„äººæ€éº¼è¾¦...\n\næˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œåæ­£ä¸ä¸€å®šæœƒä¸€ç›´å¾€ä¸Šæ¼²\n\nå› ç‚ºæµé€šé‡ä¸å¤ çš„è©±é‡‘ç®¡æœƒå°±æœƒåŸ·è¡Œæªæ–½\né€™å€‹å°±æ˜¯ç¢ºä¿ç©ºå–®é‚„æœ‰èƒ½åŠ›å¯ä»¥å›è£œ\nè¦ä¸ç„¶çœŸçš„æœƒè¢«å˜åˆ°å‡ºå¤§äº‹\n\nç•¶ç„¶æœ€æ€•çš„å°±æ˜¯ç®¡åˆ¶ä»¥å¾Œ\nè¶…ç´šå¤§æˆ¶å€‘ç¥ä»™æ‰“æ¶ä¸Ÿä¾†ä¸Ÿå»\næŠŠäººæå¾—æšˆé ­è½‰å‘\n\nå†ä¾†é‡‘å±…æ¼²çš„éƒ½æ˜¯ç¼ºæ–™ä½ èªªæŠ€è¡“ä»€éº¼çš„...\nå¦ç™½èªªçœŸçš„ä¸æ˜¯é€™ä¸€æ³¢ä¸Šæ¼²çš„ç†ç”±\næ‰€ä»¥ä¸ç”¨éåº¦æ”¾å¤§è§£é‡‹åŸºæœ¬é¢çš„æ±è¥¿\nçœŸçš„å¤§å¹…åº¦åæ‡‰æ˜¯æ˜å¹´çš„äº‹æƒ…\n\nä»¥ä¸Š",
                "engagement": "high",
                "type": "market_analysis"
            },
            {
                "content": "ä»Šæ—¥é©é€¢MSCIèª¿æ•´å‰å¤•ï¼Œå°¾ç›¤æœ‰è¢«æ‹‰ä¸Š209å…ƒï¼Œæˆ‘å€‘å¿«ä¾†çœ‹çœ‹æŠ€è¡“é¢å‘ˆç¾äº†ä»€éº¼äº¤æ˜“ç‹€æ³ã€‚\n\nä»Šå¤©é´»æµ·æ”¶åœ¨ 209 å…ƒï¼Œå°æ¼² 1.5å…ƒï¼Œæˆäº¤é‡ç´„ 40,870 å¼µï¼Œé‡èƒ½è¼ƒå‰å¹¾æ—¥ç¸®å°ã€‚è‚¡åƒ¹æŒçºŒç«™ç©©åœ¨ 5 æ—¥ã€10 æ—¥ã€20 æ—¥èˆ‡ 60 æ—¥å‡ç·šä¹‹ä¸Šï¼Œæ•´é«”å¤šé ­çµæ§‹ä¸è®Šï¼Œè€Œæœˆç·šç›®å‰å·²ä¸Šæšè‡³ 195 å…ƒï¼Œæˆç‚ºä¸­æœŸé‡è¦æ”¯æ’ã€‚æŠ€è¡“æŒ‡æ¨™æ–¹é¢ï¼ŒKD å€¼åœ¨ 72/73ï¼ŒçŸ­ç·š K å€¼å‘ä¸Šï¼Œä¸”å³å°‡å†åº¦é»ƒé‡‘äº¤å‰ï¼Œé¡¯ç¤ºå¤šé ­åŠ›é“æœ‰å›æº«è·¡è±¡ã€‚MACD å¿«æ…¢ç·šä»ç¶­æŒé»ƒé‡‘äº¤å‰ï¼Œç´…æŸ±é›–ç¸®çŸ­ï¼Œä½†è¶¨å‹¢ä»ç«™åœ¨å¤šæ–¹ã€‚\n\né´»æµ·ç›®å‰è™•æ–¼æ¼²å¤šäº†æ©«å‘æ•´ç†ï¼Œå±¬æ–¼æ¼²å¤šå¾Œçš„å¥åº·ä¼‘æ¯ï¼Œçµ¦å‡ç·šæ™‚é–“å‘ä¸Šé æ”ã€‚åªè¦ 205 å…ƒèˆ‡æœˆç·š 195 å…ƒå€é–“èƒ½å®ˆç©©ï¼ŒçŸ­ç·šå›æª”éƒ½å±¬æ­£å¸¸æ•´ç†ï¼›è‹¥èƒ½å†æ”¾é‡çªç ´ 212 å…ƒé«˜é»ï¼Œå°±æœ‰æ©Ÿæœƒå•Ÿå‹•æ–°ä¸€æ³¢æ”»å‹¢ã€‚æ•´é«”ä¾†çœ‹ï¼Œä¸­æœŸçµæ§‹ä»åå¤šï¼ŒçŸ­ç·šå‰‡æ˜¯ç­‰å¾…é‡èƒ½èˆ‡ç±Œç¢¼å†åº¦é›†ä¸­å¾Œç™¼å‹•ã€‚",
                "engagement": "medium",
                "type": "technical_analysis"
            },
            {
                "content": "æ˜å¤©ç›¤å¾Œè¼é”æ¥­ç¸¾å…¬å‘Šï¼Œé›–ç„¶å·²ç¶“æœ‰å¾ˆå¤šæ³•äººæå‡ºçŒœæ¸¬å ±å‘Š\n\nä¸éå¸‚å ´é‚„æ˜¯éå¸¸é—œæ³¨\n\n2026Q2é è¨ˆå¯¦ç¾ç‡Ÿæ”¶459.70å„„ç¾å…ƒï¼ŒåŒæ¯”å¢åŠ 53.03%ï¼›\n\né æœŸæ¯è‚¡æ”¶ç›Š0.935ç¾å…ƒï¼ŒåŒæ¯”å¢åŠ 39.51%\n\né€™ä¸€æ³¢åƒé›œäº†å…©å€‹è®Šæ•¸\n\nä¸€å€‹æ˜¯ç¾åœ‹æ”¿åºœæ‰¶æ¤Intel\n\næœ‰æ²’æœ‰å¯èƒ½é€ æˆæ¶å–®çš„ç‹€æ³ï¼Ÿ\n\nç¬¬äºŒå€‹æ˜¯Nvdaè¢«å…è¨±å°ä¸­åœ‹å¤§é™¸è³£H 20\n\nåˆ°åº•å‰æ™¯æ˜¯å¦é€æ˜?\n\næœƒä¸æœƒé‡åˆ°ä¸­åœ‹å…§éƒ¨æ³•å¾‹çš„è¦ç¯„ï¼Ÿæˆ–è€…æ˜¯å¸‚å ´é˜»åŠ›ï¼Ÿ\n\næˆ‘ä¾†æ¯”è¼ƒè¼é”è·Ÿç¾ç©é›»\n\nç¾ç©é›»ç›®å‰åœ¨å¤šç©ºæ‹‰æ‰¯\n\nï¼»ç«ç„°å†°å¡Šè† è‘—ç‹€æ…‹ï¼½\n\nè¼é”ç›®å‰ç«ä¸ç®—å¤§ï¼Œæˆ‘æœŸå¾…è®Šæˆäº”æŠŠğŸ”¥",
                "engagement": "high",
                "type": "news_analysis"
            }
        ]
    
    def analyze_content(self, content: str) -> Dict[str, Any]:
        """åˆ†æå…§å®¹ç‰¹å¾µ"""
        # å€‹äººåŒ–åˆ†æ•¸
        personal_pronouns = ["æˆ‘", "æˆ‘çš„", "æˆ‘å€‘", "æˆ‘å€‘çš„", "ä½ ", "ä½ çš„", "ä½ å€‘"]
        personal_count = sum(1 for pronoun in personal_pronouns if pronoun in content)
        personal_score = min(personal_count * 0.1, 0.4)
        
        # æƒ…æ„Ÿè¡¨é”
        emotion_words = ["ä¸çŸ¥é“", "æ‹œè¨—", "æœŸå¾…", "å¸Œæœ›", "æ“”å¿ƒ", "é–‹å¿ƒ", "é›£é"]
        emotion_count = sum(1 for word in emotion_words if word in content)
        emotion_score = min(emotion_count * 0.1, 0.3)
        
        # äº’å‹•å¼•å°
        questions = content.count("ï¼Ÿ") + content.count("?")
        interaction_score = min(questions * 0.2, 0.4)
        
        # å‰µæ„è¡¨é”
        emoji_count = len(re.findall(r'[ğŸ”¥â¤ï¸ğŸ˜ŠğŸ˜„ğŸ˜…ğŸ˜‚ğŸ¤£ğŸ˜ğŸ˜ğŸ¥°ğŸ˜˜ğŸ’ªğŸ‘ğŸ‘ğŸ‰]', content))
        creative_score = min(emoji_count * 0.2, 0.4)
        
        # å¹½é»˜è¡¨é”
        humor_words = ["ç¥ä»™æ‰“æ¶", "ç«ç„°å†°å¡Š", "è† è‘—ç‹€æ…‹", "æšˆé ­è½‰å‘", "è¶´è¶´èµ°"]
        humor_count = sum(1 for word in humor_words if word in content)
        humor_score = min(humor_count * 0.2, 0.4)
        
        # ç¸½åˆ†
        total_score = personal_score + emotion_score + interaction_score + creative_score + humor_score
        
        return {
            "personal_score": personal_score,
            "emotion_score": emotion_score,
            "interaction_score": interaction_score,
            "creative_score": creative_score,
            "humor_score": humor_score,
            "total_score": total_score,
            "engagement_level": "high" if total_score >= 0.7 else "medium" if total_score >= 0.4 else "low"
        }
    
    def run_analysis(self):
        """é‹è¡Œåˆ†æ"""
        print("ğŸ¯ å…§å®¹æ¨¡å¼åˆ†æçµæœ")
        print("=" * 50)
        
        for i, example in enumerate(self.examples, 1):
            print(f"\nğŸ“ ç¯„ä¾‹ {i}: {example['type']}")
            print("-" * 30)
            print(f"é ä¼°äº’å‹•ç­‰ç´š: {example['engagement']}")
            
            result = self.analyze_content(example['content'])
            print(f"å€‹äººåŒ–åˆ†æ•¸: {result['personal_score']:.2f}")
            print(f"æƒ…æ„Ÿåˆ†æ•¸: {result['emotion_score']:.2f}")
            print(f"äº’å‹•åˆ†æ•¸: {result['interaction_score']:.2f}")
            print(f"å‰µæ„åˆ†æ•¸: {result['creative_score']:.2f}")
            print(f"å¹½é»˜åˆ†æ•¸: {result['humor_score']:.2f}")
            print(f"ç¸½åˆ†: {result['total_score']:.2f}")
            print(f"åˆ†æç­‰ç´š: {result['engagement_level']}")
        
        print("\nğŸ” é«˜äº’å‹•å…§å®¹ç‰¹å¾µåˆ†æ")
        print("=" * 50)
        
        high_engagement_examples = [ex for ex in self.examples if ex['engagement'] == 'high']
        medium_engagement_examples = [ex for ex in self.examples if ex['engagement'] == 'medium']
        
        print(f"\né«˜äº’å‹•ç¯„ä¾‹ ({len(high_engagement_examples)} ç¯‡):")
        for ex in high_engagement_examples:
            result = self.analyze_content(ex['content'])
            print(f"- {ex['type']}: ç¸½åˆ† {result['total_score']:.2f}")
        
        print(f"\nä¸­ç­‰äº’å‹•ç¯„ä¾‹ ({len(medium_engagement_examples)} ç¯‡):")
        for ex in medium_engagement_examples:
            result = self.analyze_content(ex['content'])
            print(f"- {ex['type']}: ç¸½åˆ† {result['total_score']:.2f}")
        
        print("\nğŸ’¡ é«˜äº’å‹•å…§å®¹çš„å…±åŒç‰¹å¾µ:")
        print("1. å€‹äººåŒ–è¡¨é” - ä½¿ç”¨ã€Œæˆ‘ã€ã€ã€Œæˆ‘çš„ã€ç­‰å€‹äººä»£è©")
        print("2. æƒ…æ„Ÿè¡¨é” - åˆ†äº«å€‹äººæ„Ÿå—å’Œç¶“é©—")
        print("3. äº’å‹•å¼•å° - æå‡ºå•é¡Œæˆ–é‚€è«‹è®€è€…åƒèˆ‡")
        print("4. å‰µæ„è¡¨é” - ä½¿ç”¨è¡¨æƒ…ç¬¦è™Ÿå’Œç”Ÿå‹•æè¿°")
        print("5. å¹½é»˜å…ƒç´  - ä½¿ç”¨æ¯”å–»å’Œå‰µæ„è¡¨é”")
        print("6. ç›´æ¥å›ç­” - é‡å°è®€è€…ç–‘å•çµ¦å‡ºæ˜ç¢ºç­”æ¡ˆ")
        print("7. çµæ§‹åŒ– - æœ‰æ¢ç†åœ°çµ„ç¹”å…§å®¹")
        
        print("\nğŸ“Š å…·é«”å»ºè­°:")
        print("- å¤šä½¿ç”¨ã€Œæˆ‘èªç‚ºã€ã€ã€Œæˆ‘çš„çœ‹æ³•ã€ç­‰å€‹äººåŒ–è¡¨é”")
        print("- åŠ å…¥ã€Œä½ è¦ºå¾—å‘¢ï¼Ÿã€ã€ã€Œç•™è¨€å‘Šè¨´æˆ‘ã€ç­‰äº’å‹•å…ƒç´ ")
        print("- ä½¿ç”¨è¡¨æƒ…ç¬¦è™Ÿå¢åŠ è¦–è¦ºå¸å¼•åŠ›")
        print("- åŠ å…¥å‰µæ„æ¯”å–»å’Œå¹½é»˜è¡¨é”")
        print("- ç›´æ¥å›ç­”è®€è€…å•é¡Œï¼Œé¿å…éæ–¼æ­£å¼")
        print("- åˆ†äº«å€‹äººç¶“é©—å’Œæ„Ÿå—")

if __name__ == "__main__":
    analyzer = SimpleContentAnalyzer()
    analyzer.run_analysis()



